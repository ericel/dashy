"use strict";angular.module("dashyAppApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ngTouch","ui.router","ui.router.title","googlechart","chart.js","ds.clock","datatables"]).config(["$controllerProvider","$stateProvider","$urlRouterProvider",function(a,b,c){a.allowGlobals(),c.otherwise("/home"),b.state("home",{url:"/home",templateUrl:"views/main.html",controller:"MainCtrl",resolve:{$title:function(){return"Welcome To Dashy"}}}).state("dashykeymetrics",{url:"/dashykeymetrics",templateUrl:"views/dashy2.html",controller:"Dashy2Ctrl",resolve:{$title:function(){return"Dashy Key Metrics"}}}).state("dashydataview",{url:"/dashydataview",templateUrl:"views/dashy3.html",controller:"Dashy3Ctrl",resolve:{$title:function(){return"Dashy Data View"}}}),$(".menu li span").hasClass("closed")||($(".menu li").find("span").addClass("closed"),$(".menu li").mouseenter(function(){$(this).find(".closed").show()}),$(".menu li ").mouseleave(function(){$(this).find(".closed").hide()})),$(".icon-menu").click(function(){return $("body").hasClass("opened")?($(".menu").animate({width:"59px"},300),$(".container").animate({paddingLeft:"10px"},300),$("body").removeClass("opened"),$(".menu li").find("span").addClass("closed"),$(".menu li").find("span").hide()):($(".menu").animate({width:"193px"},300),$(".container").animate({paddingLeft:"150px"},300),$("body").addClass("opened"),$(".menu li").find("span").removeClass("closed"),$(".menu li span").show()),!1}),$(".searchbtn").click(function(){$(".searchform").toggle("slide")}),$("html").click(function(){$("body").hasClass("opened")&&($(".menu").animate({width:"59px"},300),$(".container").animate({paddingLeft:"10px"},300),$("body").removeClass("opened"),$(".menu li").find("span").addClass("closed"),$(".menu li").find("span").hide())})}]),angular.module("dashyAppApp").controller("MainCtrl",["$scope","employees","$interval","$timeout",function(a,b,c,d){var e=this;a.getDataMain=function(){b.getEmployees().then(function(b){a.responseData=b.data,e.items=b.data;var f=e.items.countries.map(function(a){return a.country}),g=e.items.countries.map(function(a){return a.employ_count}),h=e.items.countries.map(function(a){return a.allissues}),i=e.items.countries.map(function(a){return a.open_issues}),j=e.items.countries.map(function(a){return a.closed_issues}),k=e.items.countries.map(function(a){return[a.country,a.employ_count]}),l=e.items.countries.map(function(a){return[a.country,a.employ_count,a.allissues,a.open_issues,a.closed_issues]});e.items.countries.map(function(a){return a.payin_cust});Array.prototype.insert=function(a,b){this.splice(a,0,b)},k.insert(0,["Locale","Count"]),l.insert(0,["Locale","Count","Issues","Open Issues","Closed Issues"]);var m={};m.type="GeoChart",m.data=k,m.options={width:"100%",height:300,chartArea:{left:10,top:10,bottom:0,height:"100%"},colorAxis:{colors:["#70ABAF","#0E5660"]},displayMode:"world",backgroundColor:"#f5f5f5",datalessRegionColor:"#3a3633",defaultColor:"#f5f5f5"},m.formatters={number:[{columnNum:1,pattern:" #,##0.00"}]},a.chart=m,c(function(){var a=Math.floor(900*Math.random()+100),b=Math.floor(500*Math.random()+200),c=Math.floor(700*Math.random()+50),d=Math.floor(900*Math.random()+30),e=Math.floor(511*Math.random()+110);h.splice(2,1,a),h.splice(4,1,b),h.splice(3,1,e),h.splice(5,1,d),i.splice(4,1,b),i.splice(5,1,e),i.splice(2,1,a),j.splice(1,1,c),g.splice(5,1,e),g.splice(6,1,a),g.splice(4,1,b),g.splice(3,1,c)},1e4),a.labelspie=f,d(function(){a.datapie=g},900),a.labels=f,a.series=["Employees","Issues","Open Issues","Closed Issues","Some"],d(function(){a.data=[g,h,i,j]},900),a.onClick=function(a,b){console.log(a,b)},a.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"}],a.options={responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"},{id:"y-axis-2",type:"linear",display:!0,position:"right"}]}},a.orderProp="s_time"})},a.getDataMain(),a.getDataCsv=function(){b.getCountries().then(function(b){a.countriesData=b.data;var c,f,g;a.dataList=[],c=a.countriesData.split("\n"),f=0;for(var h=c.length-1;h>=0;h--){var i=c[h];f++,g=i.split(",");var j=g[0],k=g[1],l=g[2],m=g[3],n=g[4],o=g[5],p=g[6],q=g[7];""!=j&&"country"!=j&&a.dataList.push({country:j,employ_count:k,allissues:l,open_issues:m,closed_issues:n,manager:o,commpanyname:p,payin_cust:q})}a.responseDataCsv=a.dataList,e.items=a.dataList;var r=e.items.map(function(a){return a.country}),s=e.items.map(function(a){return a.employ_count}),t=e.items.map(function(a){return a.allissues}),u=e.items.map(function(a){return a.open_issues}),v=e.items.map(function(a){return a.closed_issues}),w=(e.items.map(function(a){return[a.country,a.employ_count]}),e.items.map(function(a){return[a.country,a.employ_count,a.allissues,a.open_issues,a.closed_issues]}),e.items.map(function(a){return a.payin_cust}));a.labelsopen=r,d(function(){a.dataopen=t},100),$.fn.countTo=function(a){function b(a,b){return a+b}var c=this,d=0,e=a.reduce(b,0),f=setInterval(function(){d===e?clearInterval(f):d++,c.text(d)},100);return this},$(".stats_em").countTo(s),$(".stats_iss").countTo(t),$(".stats_open").countTo(u),$(".stats_cl").countTo(v),$(".stats_py").countTo(w),$(".stats_cu").countTo(w)})},a.getDataCsv(),a.getData=function(){return b.getEmployees().then(function(a){return a.data})},a.getData().then(function(b){a.items=b,c(function(){a.getData().then(function(b){angular.equals(a.items,b)||(a.getDataMain(),console.log("There is a change in data file!"),a.items=b,a.responseData=b)})},1)}),a.getDataCsvUp=function(){return b.getCountries().then(function(a){return a.data})},a.getDataCsvUp().then(function(b){a.itemscsv=b,c(function(){a.getDataCsvUp().then(function(b){angular.equals(a.itemscsv,b)||(a.getDataCsv(),console.log("There is a change in data file!"),a.itemscsv=b,a.responseDataCsv=b)})},1)})}]),angular.module("dashyAppApp").controller("Dashy2Ctrl",["$scope","employees","$interval","$timeout",function(a,b,c,d){var e=this;a.getDataMain=function(){b.getEmployees().then(function(b){a.responseData=b.data,e.items=b.data;var f=e.items.countries.map(function(a){return a.country}),g=e.items.countries.map(function(a){return a.employ_count}),h=e.items.countries.map(function(a){return a.allissues}),i=e.items.countries.map(function(a){return a.open_issues}),j=e.items.countries.map(function(a){return a.closed_issues}),k=e.items.countries.map(function(a){return[a.country,a.employ_count]}),l=e.items.countries.map(function(a){return[a.country,a.employ_count,a.allissues,a.open_issues,a.closed_issues]}),m=e.items.countries.map(function(a){return a.payin_cust});Array.prototype.insert=function(a,b){this.splice(a,0,b)},c(function(){var a=Math.floor(900*Math.random()+100),b=Math.floor(500*Math.random()+200),c=Math.floor(700*Math.random()+50),d=Math.floor(900*Math.random()+30),e=Math.floor(511*Math.random()+110);h.splice(2,1,a),h.splice(4,1,b),h.splice(3,1,e),h.splice(5,1,d),i.splice(4,1,b),i.splice(5,1,e),i.splice(2,1,a),j.splice(1,1,c),g.splice(5,1,e),g.splice(6,1,a),g.splice(4,1,b),g.splice(3,1,c),m.splice(4,1,b)},1e4),k.insert(0,["Locale","Count"]),l.insert(0,["Locale","Count","Issues","Open Issues","Closed Issues"]),a.labelsperiod=["2009","2010","2011","2012","2013","2014","2015","2016"],a.seriesreported=["Reported Issues"],d(function(){a.datareported=[h]},100),a.labels=f,a.series=["Employees","Issues","Open Issues","Closed Issues"],d(function(){a.data=[g,h,i,j]},100),d(function(){a.dataopen=h},500),a.seriespaying_cust=["Paying Customers"],d(function(){a.datapaying_cust=[m]},500),a.onClick=function(a,b){console.log(a,b)},a.datasetOverride=[{yAxisID:"y-axis-1"},{yAxisID:"y-axis-2"}],a.options={responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"y-axis-1",type:"linear",display:!0,position:"left"},{id:"y-axis-2",type:"linear",display:!0,position:"right"}]}}})},a.getDataMain(),a.getDataCsv=function(){b.getCountries().then(function(b){a.countriesData=b.data;var c,f,g;a.dataList=[],c=a.countriesData.split("\n"),f=0;for(var h=c.length-1;h>=0;h--){var i=c[h];f++,g=i.split(",");var j=g[0],k=g[1],l=g[2],m=g[3],n=g[4],o=g[5],p=g[6],q=g[7];""!=j&&"country"!=j&&a.dataList.push({country:j,employ_count:k,allissues:l,open_issues:m,closed_issues:n,manager:o,commpanyname:p,payin_cust:q})}a.responseDataCsv=a.dataList,e.items=a.dataList;var r=e.items.map(function(a){return a.country}),s=e.items.map(function(a){return a.employ_count}),t=e.items.map(function(a){return a.allissues}),u=e.items.map(function(a){return a.open_issues}),v=e.items.map(function(a){return a.closed_issues});e.items.map(function(a){return[a.country,a.employ_count]}),e.items.map(function(a){return[a.country,a.employ_count,a.allissues,a.open_issues,a.closed_issues]}),e.items.map(function(a){return a.payin_cust});a.labelsradar=r,d(function(){a.dataradar=[s,t,u,v]},100)})},a.getDataCsv(),a.getData=function(){return b.getEmployees().then(function(a){return a.data})},a.getData().then(function(b){a.items=b,c(function(){a.getData().then(function(b){angular.equals(a.items,b)||(a.getDataMain(),console.log("There is a change in data file!"),a.items=b,a.responseData=b)})},1)}),a.getDataCsvUp=function(){return b.getCountries().then(function(a){return a.data})},a.getDataCsvUp().then(function(b){a.itemscsv=b,c(function(){a.getDataCsvUp().then(function(b){angular.equals(a.itemscsv,b)||(a.getDataCsv(),console.log("There is a change in data file!"),a.itemscsv=b,a.responseDataCsv=b)})},1)})}]),angular.module("dashyAppApp").controller("Dashy3Ctrl",["$scope","employees","$interval",function(a,b,c){a.getDataMain=function(){b.getEmployees().then(function(b){a.responseData=b.data})},a.getDataMain(),a.getData=function(){return b.getEmployees().then(function(a){return a.data})},a.getData().then(function(b){a.items=b,c(function(){a.getData().then(function(b){angular.equals(a.items,b)||(a.getDataMain(),console.log("There is a change in data file!"),a.items=b,a.responseData=b)})},1)})}]),angular.module("dashyAppApp").service("employees",["$http",function(a){this.getEmployees=function(){return a.get("./data/employee.json")},this.getCountries=function(){return a.get("./data/countries.csv")}}]),angular.module("dashyAppApp").run(["$templateCache",function(a){a.put("views/dashy2.html",'<main> <div class="panel panel-default"> <div class="panel-body"> <canvas id="line" class="chart chart-line" chart-data="data" chart-labels="labels" chart-series="series" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick" height="350" width="100%"></canvas> </div> </div>  </main> <section class="row"> <div class="col-xs-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading">Open Issues</div> <div class="panel-body"> <canvas id="doughnut" class="chart chart-doughnut" chart-data="dataopen" chart-labels="labels" chart-options="options"></canvas>  </div> </div> <div class="panel panel-default"> <div class="panel-heading">Paying Customers</div> <div class="panel-body"> <canvas class="chart chart-line" chart-data="datapaying_cust" chart-labels="labelsperiod" chart-series="seriespaying_cust" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick" height="200"></canvas> </div> </div> </div> <div class="col-xs-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading head_p">Reported Issues</div> <div class="panel-body innertube"> <canvas id="bar" class="chart chart-bar" chart-data="datareported" chart-labels="labelsperiod" chart-series="seriesreported"> </canvas> </div> </div> <div class="panel panel-default"> <div class="panel-heading">All Issues cvs</div> <div class="panel-body"> <canvas id="radar" class="chart chart-radar" chart-data="dataradar" chart-options="options" chart-labels="labelsradar"> </canvas> </div> </div> </div> </section>'),a.put("views/dashy3.html",'<div class="col-md-12 col-sm-12 col-xs-12"> <div class="clearfix"></div> <div class="panel panel-default"> <div class="panel-heading panelsecond"><span class="glyphicon glyphicon-remove marker"></span> Recent Issues <span class="pull-right glyphicon glyphicon-remove closex"></span></div> <div class="panel-body thisistable"> <table id="thistable" datatable="ng" class="hover table table-condensed display wrap" cellspacing="0" width="100%"> <thead> <tr class="success"> <th>Country</th> <th>Customer Name</th> <th>Customer Email</th> <th>Issue</th> <th>Sub. Date</th> <th>Closed. Date</th> <th>Employee</th> <th>Status</th> </tr> </thead> <tbody> <tr ng-repeat="issue in items.issues | orderBy:orderProp"> <td>{{ issue.country }}</td> <td>{{ issue.cus_name }}</td> <td>{{ issue.cust_email }}</td> <td>{{ issue.issu_des }}</td> <td>{{ issue.s_time }}</td> <td>{{ issue.issu_closed_time }}</td> <td>{{ issue.emplo_closed_name }}</td> <td><span ng-if="issue.issu_status > 0" ng-class="{highlight: issue.issu_status > 0}">Closed</span><span ng-if="issue.issu_status < 1" ng-class="{openeds: issue.issu_status < 1}">Opened</span></td> </tr> </tbody> </table> </div> </div> </div> <script>var headertext = [];\nvar headers = document.querySelectorAll("thead");\nvar tablebody = document.querySelectorAll("tbody");\n\nfor (var i = 0; i < headers.length; i++) {\n  headertext[i]=[];\n  for (var j = 0, headrow; headrow = headers[i].rows[0].cells[j]; j++) {\n    var current = headrow;\n    headertext[i].push(current.textContent);\n    }\n} \n\nfor (var h = 0, tbody; tbody = tablebody[h]; h++) {\n  for (var i = 0, row; row = tbody.rows[i]; i++) {\n    for (var j = 0, col; col = row.cells[j]; j++) {\n      col.setAttribute("data-th", headertext[h][j]);\n    } \n  }\n}</script>'),a.put("views/main.html",'<div class="box-1"> <div class="row"> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-user"></span> Total employees</span> <div class="stat-st stats_em">1029</div> <span class="glyphicon glyphicon-chevron-up stat green"></span> Per Year Data </div> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-eye-close"></span> All issues</span> <div class="stat-st stats_iss">1029</div> <span class="glyphicon glyphicon-chevron-down stat green"></span> Per Year Data </div> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-tint"></span> Open issues</span> <div class="stat-st stats_open">1029</div> <span class="glyphicon glyphicon-chevron-up stat red"></span> Per Year Data </div> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-tint"></span> Closed issues</span> <div class="stat-st stats_cl">1029</div> <span class="glyphicon glyphicon-chevron-up stat red"></span> Per Year Data </div> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-eye-close"></span> P. customers</span> <div class="stat-st stats_py">1029</div> <span class="glyphicon glyphicon-chevron-down stat green"></span> Per Year Data </div> <div class="col-md-2 col-sm-4 col-xs-6 card-blocks"> <span class="small"><span class="glyphicon glyphicon-plus-sign"></span> Customer count</span> <div class="stat-st stats_cu">1029</div> <span class="glyphicon glyphicon-chevron-up stat green"></span> Per Year Data </div> </div> </div> <div> </div> <section> <div class="box-2"> <div class="box-2-semi"> <span class="glyphicon glyphicon-stats"></span> Live Statistics <ul class="nav nav-tabs pull-right"> <li class="active"><a href="#stat1" data-toggle="tab"><span class="glyphicon glyphicon-time"></span> Home</a></li> <li><a href="#stat2" data-toggle="tab"><span class="glyphicon glyphicon-exclamation-sign"></span> Issues</a></li> </ul> <div class="clearfix"></div> </div> <div class="tab-content bor-der"> <div id="stat1" class="tab-pane fade in active"> <div class="row"> <div class="col-xs-12 col-md-6 geospartial"> <div google-chart chart="chart"></div> </div> <div class="col-xs-12 col-md-6 bar-chart"> <canvas id="pie" class="chart chart-pie" chart-data="datapie" chart-labels="labelspie" chart-options="options"></canvas> <div class="chartsmall"> <canvas class="chart chart-line" chart-data="data" chart-labels="labels" chart-series="series" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick" width="90%"></canvas> </div> </div> </div> </div> <div id="stat2" class="tab-pane fade" style="width: 100%; height:20%"> <div style="display: block; box-sizing: border-box" class="conatainer"> <canvas class="chart chart-line" chart-data="data" chart-labels="labels" chart-series="series" chart-options="options" chart-dataset-override="datasetOverride" chart-click="onClick" width="300" height="300"></canvas> </div> </div> </div> <div class="box-2-semi-up"> </div> </div></section> <section class="sec-2 row"> <div class="col-xs-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-map-marker marker"></span> Company Management Csv<span class="pull-right glyphicon glyphicon-remove closex"></span></div> <div class="panel-body"> <table class="table"> <thead> <tr class="success"> <th>Country</th> <th>Manager</th> <th>Company Name</th> </tr> </thead> <tbody> <tr class="info" ng-repeat="company in responseDataCsv"> <td>{{ company.country }}</td> <td>{{ company.manager }}</td> <td>{{ company.commpanyname }}</td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-volume-up marker"></span> Some updates <span class="pull-right glyphicon glyphicon-remove closex"></span></div> <div class="panel-body"><p class="alert alert-success">This page is temporarily disabled by the site administrator for some reason.<br>to enable the page.</p> <p class="alert alert-info"> What is Lorem Ipsum? Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry\'s standard dummy text</p><p class="alert alert-warning"> ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting </p> </div> </div> </div> <div class="col-xs-12 col-md-6"> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-remove marker"></span> Recent Issues <span class="pull-right glyphicon glyphicon-remove closex"></span></div> <div class="panel-body"> <table class="row-border hover"> <thead> <tr> <th>Country</th> <th>Issue</th> <th>Date</th> </tr> </thead> <tbody> <tr ng-repeat="issue in responseData.issues | filter:{ issu_status: 0 } | orderBy:orderProp" ng-if="$index < 5"> <td>{{ issue.country }} </td> <td>{{ issue.issu_des }}</td> <td>{{ issue.s_time }}</td> </tr> </tbody> </table> </div> </div> <div class="panel panel-default"> <div class="panel-heading"><span class="glyphicon glyphicon-calendar marker"></span> Some updates Csv<span class="pull-right glyphicon glyphicon-remove closex"></span></div> <div class="panel-body"> <canvas id="doughnut" class="chart chart-doughnut" chart-data="dataopen" chart-labels="labelsopen" chart-options="options"></canvas> </div> </div> </div> <div class="clearfix"></div> </section> <script>var headertext = [];\nvar headers = document.querySelectorAll("thead");\nvar tablebody = document.querySelectorAll("tbody");\n\nfor (var i = 0; i < headers.length; i++) {\n  headertext[i]=[];\n  for (var j = 0, headrow; headrow = headers[i].rows[0].cells[j]; j++) {\n    var current = headrow;\n    headertext[i].push(current.textContent);\n    }\n} \n\nfor (var h = 0, tbody; tbody = tablebody[h]; h++) {\n  for (var i = 0, row; row = tbody.rows[i]; i++) {\n    for (var j = 0, col; col = row.cells[j]; j++) {\n      col.setAttribute("data-th", headertext[h][j]);\n    } \n  }\n}</script>')}]);